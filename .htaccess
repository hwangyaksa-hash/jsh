# 검색 엔진 크롤러 최적화
<IfModule mod_rewrite.c>
RewriteEngine On

# 크롤러는 ?i=1 리다이렉트 제외
RewriteCond %{QUERY_STRING} ^i=1$ [NC]
RewriteCond %{HTTP_USER_AGENT} (Googlebot|Yeti|bingbot|Slurp) [NC]
RewriteRule ^(.*)$ /$1? [R=301,L]
</IfModule>

# CORS 헤더 설정 (필수만)
<IfModule mod_headers.c>

# HTML 캐시 제어 - 항상 최신
<FilesMatch "\.(html|htm)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
</FilesMatch>

# 이미지 파일은 1주일 캐시
<FilesMatch "\.(jpg|jpeg|png|gif|webp|svg|ico)$">
    Header set Cache-Control "public, max-age=604800"
</FilesMatch>

# CSS/JS 파일은 1일 캐시
<FilesMatch "\.(css|js)$">
    Header set Cache-Control "public, max-age=86400"
</FilesMatch>

# 폰트 파일은 1개월 캐시
<FilesMatch "\.(woff|woff2|ttf|eot)$">
    Header set Cache-Control "public, max-age=2592000"
</FilesMatch>

# XML, TXT 파일 캐시 제어
<FilesMatch "\.(xml|txt)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
</FilesMatch>

</IfModule>

# 인덱스 파일 설정
DirectoryIndex index.html

# UTF-8 인코딩
AddDefaultCharset UTF-8

# 검색 엔진 파일 접근 허용
<FilesMatch "\.(html|htm|xml|txt)$">
    Order allow,deny
    Allow from all
</FilesMatch>

# 네이버 확인 파일 접근 허용
<FilesMatch "^naver[a-f0-9]{32}\.html$">
    Order allow,deny
    Allow from all
    Header set Cache-Control "public, max-age=0"
</FilesMatch>
